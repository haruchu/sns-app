{% extends 'app_base.html' %}

{% block content %}
<div class="container">
  <div class="row">
    <div class="col-6 main-content post-list">
      <h4 class="home-title">返信</h4>
      <div class="post sub-color">
        <div class="user"><a href={% url 'user:profile' main_post.user.id %}><span class="accent-color">{{main_post.user}}</span></a></div>
        {% if current_user == main_post.user %}
          <div class="delete">
            <a href="{% url 'post:delete' main_post.id %}"><i class="fas fa-times zoom"></i></a>
          </div>
        {% endif %}
        <p class="ml-3 mt-3">{{ main_post.text }}</p>
        <div class="btn-right">
          {% if main_post.id in my_likes_ids %}
            <a href="{% url 'post:unlike' main_post.id %}" class="like-btn zoom"><i class="fas fa-heart"></i><span class="like-num">{{main_post.like}}</span></a>
          {% else %}
            <a href="{% url 'post:like' main_post.id %}" class="prev-like-btn zoom"><i class="far fa-heart"></i><span class="like-num">{{main_post.like}}</span></a>
          {% endif %}
        </div>
      </div>
      {% for reply in replies %}
        <div class="post sub-color">
          <div class="user"><a href={% url 'user:profile' reply.user.id %}><span class="accent-color">{{reply.user}}</span></a></div>
          {% if current_user == reply.user %}
            <div class="delete">
              <a href="{% url 'post:delete' reply.id %}"><i class="fas fa-times zoom"></i></a>
            </div>
          {% endif %}
          <p class="ml-3 mt-3">{{ reply.text }}</p>
          <div class="btn-right">
            {% if reply.id in my_likes_ids %}
              <a href="{% url 'post:unlike' reply.id %}" class="like-btn zoom"><i class="fas fa-heart"></i><span class="like-num">{{reply.like}}</span></a>
            {% else %}
              <a href="{% url 'post:like' reply.id %}" class="prev-like-btn zoom"><i class="far fa-heart"></i><span class="like-num">{{reply.like}}</span></a>
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
  <div class="row">
    <div class="post-form sub-color col-6">
      <form method="POST" action="{% url 'post:reply' main_post.id %}" class="">
        {% csrf_token %}
        {{form.as_p}}
        <input class="post-btn accent-color" type="submit" value="投稿する">
      </form>
    </div>
  </div>
</div>

{% endblock %}
